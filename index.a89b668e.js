const e=async(e=1)=>({movies:await(await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=bf9c4d58b7779ca7f547438ec065a7d2&page=${e}`)).json(),genreIds:await(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=bf9c4d58b7779ca7f547438ec065a7d2")).json()}),t=document.querySelector(".film-cards");function n(e,n=[],a){t.innerHTML="";const i=n.map((({poster_path:e,title:t,genre_ids:n,vote_average:i,release_date:s,id:o})=>{const r=a.map((e=>e.id)),c=a.map((e=>e.name)),l=[];n.forEach((e=>(l.push(r.indexOf(e)),l)));const d=l.map((e=>c[e])).slice(0,3).join(", "),v=t.slice(0,35)+"...";return`<div class='movie-card' data-movieId='${o}'>\n          <img class='movie-card__image' src='https://image.tmdb.org/t/p/w500/${e}' alt='${t}' loading='lazy' />\n  <div class='movie-card__info'>\n   <p class='info__title'>${t.length>=40?v:t}</p>\n   <p class='info__adds'>${d} | ${s.slice(0,4)}</p>\n   <p class='info__adds info__adds--vote'>${i}</p>   \n        </div></div>`})).join("");t.insertAdjacentHTML("afterbegin",i)}const a=document.querySelector(".film-cards__pagination"),i=(e=1,t=1,n=!1)=>{if(a.innerHTML="",e>=2){if(1!=t&&(a.innerHTML+='<div value="arrow_l" class="pagination__arrow left pagination__button"></div>',3!=t&&(a.innerHTML+='<div value="page" class="pagination__button">1</div>')),e<=8&&e>=2)for(let t=0;t<e;t++)a.innerHTML+=`<div value="page" class="pagination__number pagination__button">${t+1}</div>`;else{let i=0+t;if(n)for(let n=i;n<i+6;n++)if(n==i&&t>3&&(a.innerHTML+='<div value ="dots_l" class = "pagination__button" >...</div>'),n==5+i)t!=e-5&&(a.innerHTML+='<div value ="dots_r" class = "pagination__button" >...</div>');else if(t+1===-2)a.innerHTML+=`<div value="page" class="pagination__button">${n}</div>`;else a.innerHTML+=`<div value="page" class="pagination__button">${n-2}</div>`;else for(let n=i;n<i+6;n++)n==i&&t>5&&(a.innerHTML+='<div value ="dots_l" class = "pagination__button" >...</div>'),n==5+i?t!=e-5&&(a.innerHTML+='<div value ="dots_r" class = "pagination__button" >...</div>'):a.innerHTML+=`<div value="page" class="pagination__button">${n}</div>`}a.innerHTML+=`<div value="page" class="pagination__button">${e}</div>`,t!==e-5&&(a.innerHTML+='<div value="arrow_r" class = "pagination__arrow right pagination__button"></div>')}1==e&&(a.innerHTML+='<div value="page" class="pagination__button">1</div>')};let s=1,o=1;const r=(t=1,r=!0,c=!1)=>{e(t).then((e=>{const l=e.movies.results,d=e.movies.total_pages;s=d;const v=e.genreIds.genres;r&&i(d,t>=s-5?t-5:t,c),n(0,l,v),[...a.children].map((e=>{e.classList.remove("selected")})),((e,t)=>{let n,a=[...e],i=0;a.map((e=>{n=e.getAttribute("value"),"page"===n&&e.textContent===t.toString()&&(i=e.classList.add("selected"))}))})(a.children,o)})).catch(console.warn)};r(s,!0),a.addEventListener("click",(e=>{let t=0,n=0;const i=e.target;let c=parseInt(i.textContent);const l=i.getAttribute("value");if("page"==l){switch(c){case 1:case s:r(c,!0);default:r(c,!1)}o=c}else switch(l){case"dots_r":t=parseInt(i.previousElementSibling.textContent),c=t+1,a.innerHTML="",r(c>=s?s-4:c,!0),o=c;break;case"dots_l":n=parseInt(i.nextElementSibling.textContent),c=n-5,a.innerHTML="",r(c<5?1:c,!0),o=c;break;case"arrow_r":o+=1,c=o,c>s&&(a.innerHTML="",r(s-5,!0)),c<4?r(c,!1,!0):(a.innerHTML="",r(c,!0,!0)),arrowClicked=!1;break;case"arrow_l":o-=1,c=o,a.innerHTML="",r(c>1?c:1,!0,!0)}}));const c=document.querySelector(".search-form"),l=document.querySelector(".search-form__input"),d=(document.querySelector(".film-cards"),document.querySelector(".film-cards__pagination")),v=e=>{const t=document.createElement("p");return t.classList.contains("warning")&&(t.classList.remove("warning"),t.textContent=""),t.classList.add("warning"),t.textContent=e,c.after(t),t},_=e=>{if(0===e.trim().length)return d.innerHTML="",v("Enter any character!");(async e=>({movies:await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=bf9c4d58b7779ca7f547438ec065a7d2&query=${e}`)).json(),genreIds:await(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=bf9c4d58b7779ca7f547438ec065a7d2")).json()}))(e).then((e=>{e.movies.page;const t=e.movies.results,a=e.movies.total_pages,i=e.movies.total_results;allPages=a;const s=e.genreIds.genres;if(0===i)return l.value="",v("Search result not successful. Enter the correct movie name or keywords and try again!");i<20&&(d.innerHTML=""),n(0,t,s)})).catch((e=>console.log(e)))};c.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;_(t)}));
//# sourceMappingURL=index.a89b668e.js.map
