const e=async(e=1)=>{const n=await(await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=bf9c4d58b7779ca7f547438ec065a7d2&page=${e}`)).json(),t=await(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=bf9c4d58b7779ca7f547438ec065a7d2")).json();return console.log(`https://api.themoviedb.org/3/trending/movie/week?api_key=bf9c4d58b7779ca7f547438ec065a7d2&page=${e}`),{movies:n,genreIds:t}},n=document.querySelector(".film-cards");function t(e,t=[],a){n.innerHTML="";const i=t.map((({poster_path:e,title:n,genre_ids:t,vote_average:i,release_date:o,id:s})=>{const l=a.map((e=>e.id)),r=a.map((e=>e.name)),d=[];t.forEach((e=>(d.push(l.indexOf(e)),d)));const c=d.map((e=>r[e])).slice(0,3).join(", "),_=n.slice(0,35)+"...";return`<div class='movie-card' data-movieId='${s}'>\n          <img class='movie-card__image' src='https://image.tmdb.org/t/p/w500/${e}' alt='${n}' loading='lazy' />\n  <div class='movie-card__info'>\n   <p class='info__title'>${n.length>=40?_:n}</p>\n   <p class='info__adds'>${c} | ${o.slice(0,4)}</p>\n   <p class='info__adds info__adds--vote'>${i}</p>   \n        </div></div>`})).join("");n.insertAdjacentHTML("afterbegin",i)}const a=document.querySelector(".film-cards__pagination"),i=(e=1,n=1,t=!1)=>{if(i.innerHTML="",e>=2){if(1!=n&&(a.innerHTML+='<div value="arrow_l" class = "pagination__arrow left pagination__button"></div>',a.innerHTML+='<div value="page" class="pagination__button">1</div>'),e<=9&&e>=2)for(let n=0;n<e;n++)a.innerHTML+=`<div value="page" class="pagination__number pagination__button">${n+1}</div>`;else{let i=0+n;if(t)for(let t=i;t<i+6;t++)if(t==i&&1!=n&&(a.innerHTML+='<div value ="dots_l" class = "pagination__button" >...</div>'),t==5+i)n!=e-5&&(a.innerHTML+='<div value ="dots_r" class = "pagination__button" >...</div>');else switch(n+1){case 3:a.innerHTML+=`<div value="page" class="pagination__button">${t}</div>`;break;case 2:a.innerHTML+=`<div value="page" class="pagination__button">${t-1}</div>`;break;default:a.innerHTML+=`<div value="page" class="pagination__button">${t-2}</div>`}else for(let t=i;t<i+6;t++)t==i&&1!=n&&(a.innerHTML+='<div value ="dots_l" class = "pagination__button" >...</div>'),t==5+i?n!=e-5&&(a.innerHTML+='<div value ="dots_r" class = "pagination__button" >...</div>'):a.innerHTML+=`<div value="page" class="pagination__button">${t}</div>`}console.log(e,n),a.innerHTML+=`<div value="page" class="pagination__button">${e}</div>`,n!==e-5&&(a.innerHTML+='<div value="arrow_r" class = "pagination__arrow right pagination__button"></div>')}1==e&&(a.innerHTML+='<div value="page" class="pagination__button">1</div>')};let o=1;const s=(n=1,a=!0,s=!1)=>{e(n).then((e=>{const l=e.movies.results,r=e.movies.total_pages;o=r;const d=e.genreIds.genres;console.log("filmy",l,"tatl pages: ",r,d),a&&i(r,n>=o-5?n-5:n,s),t(0,l,d)})).catch(console.warn)};s(o,!0);let l=1;a.addEventListener("click",(e=>{let n=0,t=0;const i=e.target;let r=parseInt(i.textContent),d=!1;const c=i.getAttribute("value");"page"==c?(console.log("page",i.textContent),1==r||r==o?(a.innerHTML="",s(r,!0)):s(r,!1),l=r):("dots_r"==c&&(n=parseInt(i.previousElementSibling.textContent),r=n+1,a.innerHTML="",s(r>=o?o-4:r,!0),l=r),"dots_l"==c&&(console.log("next: ",i.nextElementSibling.textContent),t=parseInt(i.nextElementSibling.textContent),r=t-5,a.innerHTML="",s(r<5?1:r,!0),l=r),"arrow_r"==c&&(console.log("aktualny PAGE No. ",r,l),l+=1,r=l,console.log("Czy to jest Nan:",r),d=!0,r>o?s(o-5,!1,d):(a.innerHTML="",s(r,!0,d)),d=!1),"arrow_l"==c&&(l-=1,r=l,console.log("Czy to jest Nan:",r),a.innerHTML="",d=!0,s(r<2?1:r,!0,d),d=!1)),console.log("akutalna strona: ",r)}));
//# sourceMappingURL=index.27d36a5f.js.map
