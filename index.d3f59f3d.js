const e=async(e=1)=>{const t=await(await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=bf9c4d58b7779ca7f547438ec065a7d2&page=${e}`)).json(),n=await(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=bf9c4d58b7779ca7f547438ec065a7d2")).json();return console.log(`https://api.themoviedb.org/3/trending/movie/week?api_key=bf9c4d58b7779ca7f547438ec065a7d2&page=${e}`),{movies:t,genreIds:n}},t=document.querySelector(".film-cards");function n(e,n=[],a){t.innerHTML="";const o=n.map((({poster_path:e,title:t,genre_ids:n,vote_average:o,release_date:i,id:s})=>`<div class='movie-card'>\n          <img class='movie-card__image' src='https://image.tmdb.org/t/p/w500/${e}' alt='${t}' loading='lazy' />\n  <div class='movie-card__info'>\n   <p class='info__title'>${t}</p>\n   <p class='info__adds'>${a.map((e=>e.name)).slice(0,2).join(", ")} | ${i.slice(0,4)}</p>\n   <p class='info__adds info__adds--vote'>${o}</p>   \n        </div></div>`)).join("");t.insertAdjacentHTML("afterbegin",o)}const a=document.querySelector(".film-cards__pagination"),o=(e=1,t=1)=>{if(o.innerHTML="",e>=2){if(a.innerHTML+='<div value="arrow_l" class = "pagination__arrow left pagination__button"></div>',a.innerHTML+='<div value="page" class="pagination__button">1</div>',e<=9&&e>=2)for(let t=0;t<e;t++)a.innerHTML+=`<div value="page" class="pagination__number pagination__button">${t+1}</div>`;else{let e=0+t;for(let n=e;n<e+6;n++)n==t&&(a.innerHTML+='<div value ="dots_l" class = "pagination__button" >. . .</div>'),a.innerHTML+=n==5+t?'<div value ="dots_r" class = "pagination__button" >. . .</div>':`<div value="page" class="pagination__button">${n+1}</div>`}a.innerHTML+=`<div value="page" class="pagination__button">${e}</div>`,a.innerHTML+='<div value="arrow_r" class = "pagination__arrow right pagination__button"></div>'}1==e&&(a.innerHTML+='<div value="page" class="pagination__button">1</div>')};let i=1;const s=(t=1,a=!0)=>{e(t).then((e=>{const s=e.movies.results,l=e.movies.total_pages;i=l;const r=e.genreIds.genres;console.log("filmy",s,"tatl pages: ",l,r),a&&o(l,t>=i-5?t-5:t),n(0,s)})).catch(console.warn)};s(i,!0);a.addEventListener("click",(e=>{let t=0,n=0;const o=e.target;let l=parseInt(o.textContent);const r=o.getAttribute("value");"page"==r?(console.log("page",o.textContent),1==l||l==i?(a.innerHTML="",s(l,!0)):s(l,!1)):("dots_r"==r&&(t=parseInt(o.previousElementSibling.textContent),l=t,a.innerHTML="",s(l>i?i-5:l,!0)),"dots_l"==r&&(console.log("next: ",o.nextElementSibling.textContent),n=parseInt(o.nextElementSibling.textContent),l=n-6,a.innerHTML="",s(l<5?1:l,!0)),"arrow_r"==r&&("NaN"==l.toString()&&(l=1),l+=1,console.log("Czy to jest Nan:",l),l>i?s(i-5,!0):(a.innerHTML="",s(l,!0))),"arrow_l"==r&&("NaN"==l.toString()&&(l=1),a.innerHTML="",s(l<5?1:l-1,!0))),console.log("akutalna strona: ",l)}));let l="";const r=(t=1)=>{e(t).then((e=>{const a=e.movies.results,i=e.movies.total_pages,s=e.genreIds.genres;console.log("filmy",a,"tatl pages: ",i,s),o(i,t),n(0,a,s)})).catch(console.warn)};r(),a.addEventListener("click",(e=>{const t=e.target,n=parseInt(t.textContent),o=t.getAttribute("value");"page"==o?(console.log("page",t.textContent),a.innerHTML="",r(n),l=`&page=${n}`):("dots"==o&&console.log("wcisnieto kropeczki"),"arrow_r"==o&&console.log("Wciśnięto strzałeczkę w prawo"),"arrow_l"==o&&console.log("wciśnięto strzałeczkę w lewo"))}));
//# sourceMappingURL=index.d3f59f3d.js.map
