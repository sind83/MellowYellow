{"mappings":"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","sources":["src/js/library_main.js","src/js/library_fetch.js"],"sourcesContent":["import { fetchLibrary } from './library_fetch';\nimport { paginationPlace } from './pagination';\nimport { gallery } from './cards_rendering';\n\n\n// DOM elements\nconst myLibraryButton = document.querySelector(\n  '.navigation__item:nth-child(2)'\n);\nconst watchedListButton = document.querySelector('[loadWatched]');\nconst queueListButton = document.querySelector('[loadQueued]');\nconst moviesContainer = document.querySelector('.film-cards');\n\n// Local storage\nlet watchedMovies = [JSON.parse(localStorage.getItem('movies-watched'))];\nlet queuedMovies = [JSON.parse(localStorage.getItem('movies-queued'))];\n// console.log(watchedMovies, queuedMovies)\ngallery.innerHTML = \"\";\npaginationPlace.innerHTML = '';\n\nsetTimeout(() => {\n  \n  loadLibrary();\n  loadWatchedList();\n}, 1000)\n\n\nexport function loadLibrary() {\n  gallery.innerHTML = \"\";\n  paginationPlace.innerHTML = '';\n  loadWatchedList();\n}\n\nasync function loadWatchedList() {\n  // button's visual changes\n  watchedListButton.classList.add('button--active');\n  watchedListButton.classList.remove('button--inactive');\n  paginationPlace.innerHTML = '';\n  queueListButton.classList.add('button--inactive');\n  queueListButton.classList.remove('button--active');\n\n  // change showed movies\n\n  if (watchedMovies[0] == null || watchedMovies.length == 0) {\n    paginationPlace.innerHTML = '';\n    moviesContainer.innerHTML = `<h2>You don't have any watched movies yet!</h2>`;\n    return;\n  } else {\n    paginationPlace.innerHTML = '';\n    // console.log(watchedMovies);\n\n    fetchLibrary(watchedMovies[0]);\n  }\n}\nasync function loadQueueList() {\n  // button's visual changes\n  queueListButton.classList.add('button--active');\n  queueListButton.classList.remove('button--inactive');\n\n  watchedListButton.classList.add('button--inactive');\n  watchedListButton.classList.remove('button--active');\n\n  // change showed movies\n  moviesContainer.innerHTML = '';\n  if (queuedMovies[0] == null || queuedMovies.length == 0) {\n    moviesContainer.innerHTML = `<h2>You don't have any queued movies yet!</h2>`;\n    // return;\n  } else {\n    // console.log(queuedMovies[0]);\n    fetchLibrary(queuedMovies[0]);\n  }\n}\n\n// loadLibrary();\n// loadWatchedList();\n\n\nmyLibraryButton.addEventListener('click', loadLibrary);\n\nwatchedListButton.addEventListener('click', loadWatchedList);\nqueueListButton.addEventListener('click', loadQueueList);\n\n","import { renderMovies } from './cards_rendering';\nconst api_key = `bf9c4d58b7779ca7f547438ec065a7d2`;\nconst api_url = `https://api.themoviedb.org/3/movie/`;\nimport { paginationPlace } from './pagination';\n\nexport async function fetchLibrary(ids) {\n  let watchedMoviesURL = [];\n  // finding movie\n  for (const movieId of ids) {\n    watchedMoviesURL.push(api_url+`${movieId.id}?api_key=${api_key}`);\n  }\n  console.log('Movies in this library (URL): ', watchedMoviesURL);\n  const movies = [];\n\n  for (const movie of watchedMoviesURL) {\n    let res = await (await fetch(movie)).json();\n    let genres = res[`genres`];\n    let genresIds = [];\n    for (const genre of genres) {\n      genresIds.push(genre.id);\n    }\n    res['genre_ids'] = genresIds;\n    movies.push(res);\n  }\n  console.log('This library:', movies);\n  renderMovies(0, movies, movies[0]['genres']);\n  paginationPlace.innerHTML = '';\n}\n"],"names":["$bpxeT","parcelRequire","$6fda4c5e0fd12b40$var$api_key","$6fda4c5e0fd12b40$var$api_url","$6fda4c5e0fd12b40$export$3da1c33d77833b0c","ids","$6fda4c5e0fd12b40$var$_fetchLibrary","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","watchedMoviesURL","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","movieId","movies","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","movie","res","genres","genresIds","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","genre","undefined","Symbol","iterator","next","done","value","push","concat","id","_ctx","t0","return","console","log","fetch","sent","json","t1","t2","$iGUyU","renderMovies","$jcFG7","paginationPlace","innerHTML","$54cdf0dc33f0c8bb$var$myLibraryButton","document","querySelector","$54cdf0dc33f0c8bb$var$watchedListButton","$54cdf0dc33f0c8bb$var$queueListButton","$54cdf0dc33f0c8bb$var$moviesContainer","$54cdf0dc33f0c8bb$var$watchedMovies","JSON","parse","localStorage","getItem","$54cdf0dc33f0c8bb$var$queuedMovies","$54cdf0dc33f0c8bb$export$826c32731ceb1c03","gallery","$54cdf0dc33f0c8bb$var$loadWatchedList","$54cdf0dc33f0c8bb$var$_loadWatchedList","classList","add","remove","length","$54cdf0dc33f0c8bb$var$_loadQueueList","setTimeout","addEventListener"],"version":3,"file":"library.606d19d1.js.map"}