{"mappings":"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","sources":["src/js/library_main.js","src/js/library_fetch.js"],"sourcesContent":["import { fetchLibrary } from './library_fetch';\n\n// DOM elements\nconst myLibraryButton = document.querySelector(\n  '.navigation__item:nth-child(2)'\n);\nconst watchedListButton = document.querySelector('[loadWatched]');\nconst queueListButton = document.querySelector('[loadQueued]');\nconst moviesContainer = document.querySelector('.film-cards');\n\n// Local storage\nconst watchedMovies = [JSON.parse(localStorage.getItem('movies-watched'))];\nconst queuedMovies = [JSON.parse(localStorage.getItem('movies-queued'))];\n\nexport function loadLibrary() {\n  loadWatchedList;\n}\n\nasync function loadWatchedList() {\n  // button's visual changes\n  watchedListButton.classList.add('button--active');\n  watchedListButton.classList.remove('button--inactive');\n\n  queueListButton.classList.add('button--inactive');\n  queueListButton.classList.remove('button--active');\n\n  // change showed movies\n  moviesContainer.innerHTML = '';\n  if (watchedMovies == null || watchedMovies.length == 0) {\n    moviesContainer.innerHTML = `<h2>You don't have any watched movies yet!</h2>`;\n    return;\n  } else {\n    console.log(watchedMovies);\n\n    fetchLibrary(watchedMovies[0]);\n  }\n}\nasync function loadQueueList() {\n  // button's visual changes\n  queueListButton.classList.add('button--active');\n  queueListButton.classList.remove('button--inactive');\n\n  watchedListButton.classList.add('button--inactive');\n  watchedListButton.classList.remove('button--active');\n\n  // change showed movies\n  moviesContainer.innerHTML = '';\n  if (queuedMovies == null || queuedMovies.length == 0) {\n    moviesContainer.innerHTML = `<h2>You don't have any queued movies yet!</h2>`;\n    return;\n  } else {\n    console.log(queuedMovies[0]);\n    fetchLibrary(queuedMovies[0]);\n  }\n}\nmyLibraryButton.addEventListener('click', loadLibrary);\n\nwatchedListButton.addEventListener('click', loadWatchedList);\nqueueListButton.addEventListener('click', loadQueueList);\n","import { renderMovies } from './cards_rendering';\nconst api_key = `bf9c4d58b7779ca7f547438ec065a7d2`;\nconst api_url = `https://api.themoviedb.org/3/movie/`;\n\nexport async function fetchLibrary(ids) {\n  let watchedMoviesURL = [];\n  // finding movie\n  for (const movieId of ids) {\n    watchedMoviesURL.push(api_url + `${movieId.id}?api_key=${api_key}`);\n  }\n  console.log('Movies in this library (URL): ', watchedMoviesURL);\n  const movies = [];\n\n  for (const movie of watchedMoviesURL) {\n    let res = await (await fetch(movie)).json();\n    let genres = res[`genres`];\n    let genresIds = [];\n    for (const genre of genres) {\n      genresIds.push(genre.id);\n    }\n    res['genre_ids'] = genresIds;\n    movies.push(res);\n  }\n  console.log('This library:', movies);\n  renderMovies(0, movies, movies[0]['genres']);\n}\n"],"names":["$bpxeT","parcelRequire","$6fda4c5e0fd12b40$var$api_key","$6fda4c5e0fd12b40$var$api_url","$6fda4c5e0fd12b40$export$3da1c33d77833b0c","ids","$6fda4c5e0fd12b40$var$_fetchLibrary","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","watchedMoviesURL","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","movieId","movies","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","_step1","movie","res","genres","genresIds","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","genre","undefined","Symbol","iterator","next","done","value","push","concat","id","_ctx","t0","return","console","log","fetch","sent","json","t1","t2","$iGUyU","renderMovies","$54cdf0dc33f0c8bb$var$myLibraryButton","document","querySelector","$54cdf0dc33f0c8bb$var$watchedListButton","$54cdf0dc33f0c8bb$var$queueListButton","$54cdf0dc33f0c8bb$var$moviesContainer","$54cdf0dc33f0c8bb$var$watchedMovies","JSON","parse","localStorage","getItem","$54cdf0dc33f0c8bb$var$queuedMovies","$54cdf0dc33f0c8bb$var$loadWatchedList","$54cdf0dc33f0c8bb$var$_loadWatchedList","classList","add","remove","innerHTML","length","$54cdf0dc33f0c8bb$var$_loadQueueList","addEventListener"],"version":3,"file":"library.5419c202.js.map"}